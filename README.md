# QS解析器设计文档v1

[toc]

## QS语言介绍

- QS全称QingScript，是一门面向过程的脚本语言，功能比较简单，主要是为了巩固编译原理的知识而设计的。

## 语法

1.  保留字：

```javascript
import, export, module, fun, let, if, else, while, return, true, false, null
```

2. 标识符：

```
由字母或下划线开头, 后接任意任意个字母或数字或下划线
```

3. 合法符号：

```
( ) [ ] { } , ; = + - / * | & ! < > >= <= == != @ : || && .
```

5. 注释：

```
注释支持单行 // 与多行注释 /* */ 
```

##  程序结构

- 支持模块，一个文件作为一个模块。

  - 模块定义使用`@module: 模块名`来定义，模块定义必须在第一行。
  - 模块导入使用`@import: 模块名`来导入
  - 模块中对于要导出的方法或变量使用`@export: 导出对象`来定义

- 一个QS项目中必须要有一个main函数（有且只有一个），该函数作为程序入口。
  样例：

  ```
  @module: test
  @import: test1
  let temp;
  fun main(){
  	语句
  }
  @export: 要导出的方法名或变量名
  ```

## 变量

- 变量声明：
  - 变量声明使用`let`关键字来声明，支持连续变量声明，如果声明的时候没有赋值，默认为`null`
- 变量分类：
  - 变量分为两类，一类是模块变量，一类是局部变量。
    - 在模块下直接定义的是模块变量，模块变量支持导出。
    - 在方法内定义的是局部变量，局部变量不支持导出。
- 数据类型：
  - 支持的数据类型与JavaScript一致，number（实数）、string（字符串 ）、bool（布尔）、object（对象）以及array（数组，暂不支持多维数组）

## 语句

1. 赋值语句

```
let a,b,c;
let a1 = 1,b1 = 2;
a = [1,2,3,4];
a[1] = 12;
b = "123";
c = {key:value};
```

2. if语句

```
if(表达式){
	语句;
}elif(表达式){
	语句;
}else{
	语句;
}
```

3. while语句

```
while(表达式){
	语句;
}
```

4. 函数定义

```
fun 函数名(形参1, 形参2){
	语句;
}
```

5. 函数调用

```
函数名(实参1,实参2);
模块名.函数名(实参1,实参2);
```

6. return语句

```
return 表达式;
return;
```

## QS解释器模块介绍

​	QS解释器一共有三个模块，词法分析器、语法分析器以及解释器。

### 词法分析器
### 语法分析器
### 解释器
##TODO


